out="";
LinkWrite[kernel,
	EnterTextPacket[
		MemoryConstrained[
			TimeConstrained[({cmd}) // ToString,30,out=out<>"TLE(30s)"]
		,268435456,out=out<>"MLE(256M)"]
	]
];
TimeConstrained[
	While[LinkReadyQ@kernel,
		x=LinkRead[kernel];
		Switch[x,
			_TextPacket,out=out<>ToString[x[[1]]]<>"\n",
			_ReturnTextPacket,out=out<>ToString[x[[1]]]<>"\n",
			_OutputNamePacket,out=out<>ToString[x[[1]]]
		]
	];
,10,out="";out=out<>"输出时超时(10s)"];
out